- defaults:
    link:
      create: true
      relink: true

- clean: ["~", "~/.config"]

- create:
    - ~/Downloads

- link:
    ~/.dotfiles: ""
    ~/.shell:
    ~/.bash_profile:
    ~/.bashrc_user: bashrc
    ~/.zprofile:
    ~/.zshrc_user: zshrc
    ~/.gitconfig:
    ~/.gitconfig_doktor:
    ~/.gitignore_global:
    ~/.gitmessage:
    ~/.tmux.conf:
    ~/.config/alacritty/alacritty.yml:
      path: alacritty.yml
      if: '[ "$(uname -s)" = "Darwin" ]'
    ~/.config/kitty/kitty.conf: kitty.conf
    ~/.wezterm.lua: wezterm.lua
    ~/.ipython/profile_default/ipython_config.py:
    ~/.config/NvChad/lua/custom:
      path: nvim-nvchad/lua/custom
      force: true
    ~/.config/LazyVim/lua:
      path: nvim-lazyvim/lua
      force: true
    ~/.config/helix:
    ~/.config/starship.toml: starship.toml
    ~/Library/Application Support/Code/User/settings.json:
      path: vscode_settings.jsonc
      force: true
      if: '[ "$(uname -s)" = "Darwin" ]'
    ~/Library/Application Support/Code - Insiders/User/settings.json:
      path: vscode-insiders_settings.jsonc
      force: true
      if: '[ "$(uname -s)" = "Darwin" ]'

    # # Remap US English layout's ['; keys to Swedish åäö keys (works poorly) using built-in macOS key bindings
    #   ~/Library/KeyBindings/DefaultKeyBinding.dict:
    #       path: _macos/DefaultKeyBinding.dict
    #       force: true
    #       if: '[ "$(uname -s)" = "Darwin" ]'

    # Remap US English layout's ['; keys to Swedish åäö keys using Karabiner
    ~/.config/karabiner:
      path: _macos/karabiner
      create: true
      if: '[ "$(uname -s)" = "Darwin" ]'

- shell:
    - git submodule sync --recursive

    # add shell sourcing to bash
    - grep -qxF '[[ -s ~/.bashrc_user ]] && source ~/.bashrc_user' ~/.bashrc || echo '[[ -s ~/.bashrc_user ]] && source ~/.bashrc_user' >> ~/.bashrc

    # add shell sourcing to zsh
    - grep -qxF '[[ -s ~/.zshrc_user ]] && source ~/.zshrc_user' ~/.zshrc || echo '[[ -s ~/.zshrc_user ]] && source ~/.zshrc_user' >> ~/.zshrc

    # ssh
    - mkdir -p ~/.ssh && chmod 700 ~/.ssh
    - touch ~/.ssh/known_hosts && chmod 644 ~/.ssh/known_hosts
    - touch ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys

    # pre-commit hook
    - cp pre-commit .git/hooks/pre-commit
