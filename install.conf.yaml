- defaults:
    link:
      create: true
      relink: true

- clean: ['~', '~/.config']

- create:
    - ~/Downloads

- link:
    ~/.dotfiles: ''
    ~/.shell:
    ~/.bash_profile:
    ~/.bashrc_user: bashrc
    ~/.zshrc_user: zshrc
    ~/.gitconfig:
    ~/.gitconfig_doktor:
    ~/.gitignore_global:
    ~/.tmux.conf:
    ~/.ipython/profile_default/ipython_config.py:
    ~/.config/starship.toml: starship.toml
    ~/.config/kitty/kitty.conf: kitty.conf

- shell:
  - git submodule sync --recursive

  # add shell sourcing to bash
  - grep -qxF '[[ -s ~/.bashrc_user ]] && source ~/.bashrc_user' ~/.bashrc || echo '[[ -s ~/.bashrc_user ]] && source ~/.bashrc_user' >> ~/.bashrc

  # add shell sourcing to zsh
  - grep -qxF '[[ -s ~/.zshrc_user ]] && source ~/.zshrc_user' ~/.zshrc || echo '[[ -s ~/.zshrc_user ]] && source ~/.zshrc_user' >> ~/.zshrc

  # ssh
  - mkdir -p ~/.ssh && chmod 700 ~/.ssh
  - touch ~/.ssh/known_hosts && chmod 644 ~/.ssh/known_hosts
  - touch ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys
