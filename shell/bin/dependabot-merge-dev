#!/bin/bash -ex

# Get the list of numbers
pr_numbers=$(gh pr list --app dependabot --json number --jq '.[].number' --search "is:open draft:false status:pending status:success chore(deps-dev) in:title")

# Iterate over each number and approve and merge the corresponding PR
for pr_number in $pr_numbers; do
	gh pr review --approve "$pr_number"
	gh pr merge "$pr_number" --auto
done
